<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.2 Spatial random sampling with QGIS | Technical Guide for Estimating Building Rooftop Solar Potential in a City</title>
  <meta name="description" content="A technical guide for mapping rooftop solar potential in a city using open source data and software." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="4.2 Spatial random sampling with QGIS | Technical Guide for Estimating Building Rooftop Solar Potential in a City" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/einavg7/sp_technical_guide/" />
  
  <meta property="og:description" content="A technical guide for mapping rooftop solar potential in a city using open source data and software." />
  <meta name="github-repo" content="Einavg7/Solar-Potential-Technical-Guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.2 Spatial random sampling with QGIS | Technical Guide for Estimating Building Rooftop Solar Potential in a City" />
  
  <meta name="twitter:description" content="A technical guide for mapping rooftop solar potential in a city using open source data and software." />
  

<meta name="author" content="Einav Grinberg" />


<meta name="date" content="2022-03-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="what-is-sampling-and-spatial-sampling.html"/>
<link rel="next" href="spatial-stratified-sampling-with-qgis.html"/>
<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.0/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Technical Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction">Introduction<span></span></a>
<ul>
<li><a href="motivation-behind-the-guide.html#motivation-behind-the-guide">Motivation behind the guide<span></span></a></li>
<li><a href="structure-of-the-guide.html#structure-of-the-guide">Structure of the guide<span></span></a></li>
<li><a href="guide-outputs.html#guide-outputs">Guide outputs<span></span></a></li>
<li><a href="acknowledgments.html#acknowledgments">Acknowledgments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="open-source-software-and-data.html"><a href="open-source-software-and-data.html"><i class="fa fa-check"></i><b>1</b> Open source software and data<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="qgis.html"><a href="qgis.html"><i class="fa fa-check"></i><b>1.1</b> QGIS<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="quickmapservices-qms.html"><a href="quickmapservices-qms.html"><i class="fa fa-check"></i><b>1.2</b> QuickMapServices (QMS)<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>1.3</b> RStudio<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="open-street-map-osm.html"><a href="open-street-map-osm.html"><i class="fa fa-check"></i><b>1.4</b> Open Street Map (OSM)<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="global-solar-atlas.html"><a href="global-solar-atlas.html"><i class="fa fa-check"></i><b>1.5</b> Global Solar Atlas<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mapping-electricity-consumption.html"><a href="mapping-electricity-consumption.html"><i class="fa fa-check"></i><b>2</b> Mapping electricity consumption<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="adding-table-data-to-qgis.html"><a href="adding-table-data-to-qgis.html"><i class="fa fa-check"></i><b>2.1</b> Adding table data to QGIS<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="adding-vector-layers-to-qgis.html"><a href="adding-vector-layers-to-qgis.html"><i class="fa fa-check"></i><b>2.2</b> Adding vector layers to QGIS<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="joining-vector-layers-and-table-data.html"><a href="joining-vector-layers-and-table-data.html"><i class="fa fa-check"></i><b>2.3</b> Joining vector layers and table data<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="consumption-visualizations.html"><a href="consumption-visualizations.html"><i class="fa fa-check"></i><b>2.4</b> Consumption visualizations<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="solar-radiation-and-renewable-electricity-calculation.html"><a href="solar-radiation-and-renewable-electricity-calculation.html"><i class="fa fa-check"></i><b>3</b> Solar radiation and renewable electricity calculation<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="adding-raster-layers-to-qgis.html"><a href="adding-raster-layers-to-qgis.html"><i class="fa fa-check"></i><b>3.1</b> Adding raster layers to QGIS<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="extracting-raster-values-to-vector-layers.html"><a href="extracting-raster-values-to-vector-layers.html"><i class="fa fa-check"></i><b>3.2</b> Extracting raster values to vector layers<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="qgis-field-calculator.html"><a href="qgis-field-calculator.html"><i class="fa fa-check"></i><b>3.3</b> QGIS Field calculator<span></span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="qgis-field-calculator.html"><a href="qgis-field-calculator.html#building-rooftop-area"><i class="fa fa-check"></i><b>3.3.1</b> Building rooftop area<span></span></a></li>
<li class="chapter" data-level="3.3.2" data-path="qgis-field-calculator.html"><a href="qgis-field-calculator.html#usable-solar-radiation"><i class="fa fa-check"></i><b>3.3.2</b> Usable solar radiation<span></span></a></li>
<li class="chapter" data-level="3.3.3" data-path="qgis-field-calculator.html"><a href="qgis-field-calculator.html#renewable-electricity-production"><i class="fa fa-check"></i><b>3.3.3</b> Renewable electricity production<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="renewable-electricity-estimation-for-the-whole-city.html"><a href="renewable-electricity-estimation-for-the-whole-city.html"><i class="fa fa-check"></i><b>4</b> Renewable electricity estimation for the whole city<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="what-is-sampling-and-spatial-sampling.html"><a href="what-is-sampling-and-spatial-sampling.html"><i class="fa fa-check"></i><b>4.1</b> What is sampling and spatial sampling?<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="what-is-sampling-and-spatial-sampling.html"><a href="what-is-sampling-and-spatial-sampling.html#selecting-a-sample-size"><i class="fa fa-check"></i><b>4.1.1</b> Selecting a sample size<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="what-is-sampling-and-spatial-sampling.html"><a href="what-is-sampling-and-spatial-sampling.html#la-plata-sample-size-calculation"><i class="fa fa-check"></i><b>4.1.2</b> La Plata sample size calculation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="spatial-random-sampling-with-qgis.html"><a href="spatial-random-sampling-with-qgis.html"><i class="fa fa-check"></i><b>4.2</b> Spatial random sampling with QGIS<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="spatial-random-sampling-with-qgis.html"><a href="spatial-random-sampling-with-qgis.html#the-qms-plugin"><i class="fa fa-check"></i><b>4.2.1</b> The QMS plugin<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="spatial-random-sampling-with-qgis.html"><a href="spatial-random-sampling-with-qgis.html#digitizing-a-sample-with-qms"><i class="fa fa-check"></i><b>4.2.2</b> Digitizing a sample with QMS<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="spatial-random-sampling-with-qgis.html"><a href="spatial-random-sampling-with-qgis.html#including-the-density-factor"><i class="fa fa-check"></i><b>4.2.3</b> Including the density factor<span></span></a></li>
<li class="chapter" data-level="4.2.4" data-path="spatial-random-sampling-with-qgis.html"><a href="spatial-random-sampling-with-qgis.html#solar-radiation-and-renewable-electricity-calculation-1"><i class="fa fa-check"></i><b>4.2.4</b> Solar radiation and renewable electricity calculation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="spatial-stratified-sampling-with-qgis.html"><a href="spatial-stratified-sampling-with-qgis.html"><i class="fa fa-check"></i><b>4.3</b> Spatial stratified sampling with QGIS<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="spatial-stratified-sampling-with-qgis.html"><a href="spatial-stratified-sampling-with-qgis.html#land-use-change-raster"><i class="fa fa-check"></i><b>4.3.1</b> Land use change raster<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="spatial-stratified-sampling-with-qgis.html"><a href="spatial-stratified-sampling-with-qgis.html#raster-to-polygons"><i class="fa fa-check"></i><b>4.3.2</b> Raster to polygons<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="rstudio-calculations.html"><a href="rstudio-calculations.html"><i class="fa fa-check"></i><b>4.4</b> RStudio calculations<span></span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="rstudio-calculations.html"><a href="rstudio-calculations.html#random-sampling"><i class="fa fa-check"></i><b>4.4.1</b> Random sampling<span></span></a></li>
<li class="chapter" data-level="4.4.2" data-path="rstudio-calculations.html"><a href="rstudio-calculations.html#equal-size-stratification"><i class="fa fa-check"></i><b>4.4.2</b> Equal size stratification<span></span></a></li>
<li class="chapter" data-level="4.4.3" data-path="rstudio-calculations.html"><a href="rstudio-calculations.html#optimal-allocation-stratification"><i class="fa fa-check"></i><b>4.4.3</b> Optimal allocation stratification<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="comparison-between-sample-results-and-sampling-methods.html"><a href="comparison-between-sample-results-and-sampling-methods.html"><i class="fa fa-check"></i><b>4.5</b> Comparison between sample results and sampling methods<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results-and-outputs.html"><a href="results-and-outputs.html"><i class="fa fa-check"></i><b>5</b> Results and outputs<span></span></a></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Technical Guide for Estimating Building Rooftop Solar Potential in a City</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="spatial-random-sampling-with-qgis" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Spatial random sampling with QGIS<a href="spatial-random-sampling-with-qgis.html#spatial-random-sampling-with-qgis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To create a spatial random sample in QGIS we will need the city’s administrative borders polygon. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-197">4.1</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-197"></span>
<img src="images/admin.png" alt="La Plata Administrative Border" width="100%" />
<p class="caption">
Figure 4.1: La Plata Administrative Border
</p>
</div>
<p>Next, we will go to the <strong>Vector Menu</strong>, select the <strong>Research Tools</strong> option and click on the <strong>Random Points in Layer Bounds</strong>. This algorithm creates a new point layer with a given number of random points, all of them within the extent of a given layer. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-198">4.2</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-198"></span>
<img src="images/spatialpoints.png" alt="Random Points in Layer Bounds" width="100%" />
<p class="caption">
Figure 4.2: Random Points in Layer Bounds
</p>
</div>
<p>The algorithm dialog window opens and we will fill in the parameters according to our analysis. The input layer of the administrative borders of La Plata is called <span style="color: blue;">polygon_3</span>, first we will create 100 random points in the layers extent and save the file as a shapefile by the name <span style="color: blue;">sample1</span>. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-199">4.3</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-199"></span>
<img src="images/spatialpoints2.png" alt="Random Points in Layer Bounds Dialog" width="70%" />
<p class="caption">
Figure 4.3: Random Points in Layer Bounds Dialog
</p>
</div>
<p>We can see that the layer <span style="color: blue;">sample1</span> is uploaded to our QGIS interface. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-200">4.4</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-200"></span>
<img src="images/spatialpoints3.png" alt="Random Points in Layer Bounds Output Layer in QGIS" width="100%" />
<p class="caption">
Figure 4.4: Random Points in Layer Bounds Output Layer in QGIS
</p>
</div>
<div id="the-qms-plugin" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> The QMS plugin<a href="spatial-random-sampling-with-qgis.html#the-qms-plugin" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we created 100 sample points in the administrative borders of La Plata, we need to see where does the point fall. To do so, we will use QMS to add a TMS layer to the QGIS interface.
There are many different TMS that are available in QMS (<a href="https://qms.nextgis.com/#">here</a>), the ideal layer would be the one with a high resolution that was updated recently.<br />
In this project, we will use two TMS layers to compare and achieve the best accuracy while digitizing the building rooftops.</p>
<ol style="list-style-type: decimal">
<li><a href="https://qms.nextgis.com/geoservices/1135/">Google Satellite Hybrid</a></li>
<li><a href="https://qms.nextgis.com/geoservices/4470/">ESRI</a></li>
</ol>
<p>To add the QMS plugin to QGIS, click on the <strong>Plugins</strong> menu and select the <strong>Manage and Install Plugins…</strong> option. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-201">4.5</a></em>)<br />
The <strong>Plugins Dialog</strong> will open, there we can see all the plugins installed in our QGIS, in the search bar we will type <strong>QMS</strong> and see if the plugin needs to be installed or already exists in the plugin library. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-202">4.6</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-201"></span>
<img src="images/plugins.png" alt="Plugins Menu" width="100%" />
<p class="caption">
Figure 4.5: Plugins Menu
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-202"></span>
<img src="images/plugins2.png" alt="Plugins Dialog" width="70%" />
<p class="caption">
Figure 4.6: Plugins Dialog
</p>
</div>
<p>To add the <strong>Search QMS</strong> panel we will right click on the menu bar and choose under <strong>Panels</strong> the <strong>Search QMS</strong> panel, the panel appears on the right side under the <strong>Processing Toolbox</strong>. In the search panel we can search for the QMS suitable for our project, here we see the QMS we need under the last used QMS, click <strong>add</strong> on the <span style="color: blue;">Google Satellite Hybrid</span> and <span style="color: blue;">ESRI</span>. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-203">4.7</a> and <a href="spatial-random-sampling-with-qgis.html#fig:img-204">4.8</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-203"></span>
<img src="images/qmspanel.png" alt="QMS Search Panel" width="100%" />
<p class="caption">
Figure 4.7: QMS Search Panel
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-204"></span>
<img src="images/qmsqgis.png" alt="QMS in QGIS" width="100%" />
<p class="caption">
Figure 4.8: QMS in QGIS
</p>
</div>
</div>
<div id="digitizing-a-sample-with-qms" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Digitizing a sample with QMS<a href="spatial-random-sampling-with-qgis.html#digitizing-a-sample-with-qms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have the <span style="color: blue;">sample1</span> layer and QMS layers in our QGIS interface, the next step is to create a new polygon vector layer.<br />
To do this we will go to the menu bar, click on the <strong>Layer Menu</strong>, select the <strong>Create Layer</strong> and there choose the <strong>New Shapefile Layer…</strong> option. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-205">4.9</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-205"></span>
<img src="images/createvec.png" alt="Create Vector Layer" width="100%" />
<p class="caption">
Figure 4.9: Create Vector Layer
</p>
</div>
<p>The <strong>New Shapefile Layer…</strong> dialog will open and we can fill in the parameters for our layer. This layer we will name <span style="color: blue;">sample100</span>. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-206">4.10</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-206"></span>
<img src="images/createvec2.png" alt="Create Vector Layer Dialog" width="70%" />
<p class="caption">
Figure 4.10: Create Vector Layer Dialog
</p>
</div>
<p>Next we will right click on the <span style="color: blue;">sample100</span> layer and select the <strong>Toggle Editing</strong> option. This enables creating new polygons and adding them to the layer. Once the option is set we can see under the menu bar many different editing options in the <strong>Shape Digitizing Toolbar</strong> (if this is not already added, right click on the menu bar and select the toolbar under the <strong>Toolbars</strong> option), each time we want to digitize a new polygon we will click on the <strong>Add Polygon Feature</strong> option. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-207">4.11</a> and <a href="spatial-random-sampling-with-qgis.html#fig:img-208">4.12</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-207"></span>
<img src="images/toggle.png" alt="Toggle Editing" width="100%" />
<p class="caption">
Figure 4.11: Toggle Editing
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-208"></span>
<img src="images/toggle2.png" alt="Shape Digitizing Toolbar - Add Polygon Feature" width="100%" />
<p class="caption">
Figure 4.12: Shape Digitizing Toolbar - Add Polygon Feature
</p>
</div>
<p>Once the layer <span style="color: blue;">sample100</span> is editable we will open the <strong>Attribute Table</strong> of <span style="color: blue;">sample1</span> and select a point according to the id field and click on the <strong>Zoom map to the selected rows</strong> option.
We will see that the point id = 49, falls on a building rooftop.
<em>In <a href="spatial-random-sampling-with-qgis.html#fig:img-209">4.13</a> we see that id 49 is selected, it is recommended to start from the lowest id to the highest, to remember which point was already digitized.</em></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-209"></span>
<img src="images/dig.png" alt="Random Point ID=49 from the layer sample1" width="100%" />
<p class="caption">
Figure 4.13: Random Point ID=49 from the layer sample1
</p>
</div>
<p>Then we will click on the <strong>Add Polygon Feature</strong> option and follow the outline of the building rooftop using the TMS layers to achieve the best accuracy possible.(<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-210">4.14</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-210"></span>
<img src="images/dig2.png" alt="Digitizing ID=49 in the Layer sample100" width="100%" />
<p class="caption">
Figure 4.14: Digitizing ID=49 in the Layer sample100
</p>
</div>
<p>For more information about digitizing and editing layers click <a href="https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html?highlight=digitizing#digitizing-an-existing-layer">here</a>.</p>
</div>
<div id="including-the-density-factor" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Including the density factor<a href="spatial-random-sampling-with-qgis.html#including-the-density-factor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once a random point does not fall on a rooftop building we will digitize it to include it in our analysis as a density factor.<br />
We will digitize the point in a small triangle shape, so the polygon’s area will be under 30 <span class="math inline">\(m^2\)</span>. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-211">4.15</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-211"></span>
<img src="images/dens.png" alt="Digitizing to include the Density Factor" width="100%" />
<p class="caption">
Figure 4.15: Digitizing to include the Density Factor
</p>
</div>
</div>
<div id="solar-radiation-and-renewable-electricity-calculation-1" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Solar radiation and renewable electricity calculation<a href="spatial-random-sampling-with-qgis.html#solar-radiation-and-renewable-electricity-calculation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once finishing digitizing all the sample building rooftops, we will return to the steps described in chapter <a href="solar-radiation-and-renewable-electricity-calculation.html#solar-radiation-and-renewable-electricity-calculation">3</a> and calculate the solar radiation and renewable electricity for the sample. (<em>See <a href="spatial-random-sampling-with-qgis.html#fig:img-212">4.16</a></em>)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-212"></span>
<img src="images/sample100.png" alt="Sample100 Attribute Table with Calculations" width="100%" />
<p class="caption">
Figure 4.16: Sample100 Attribute Table with Calculations
</p>
</div>
<p>As discussed in <a href="what-is-sampling-and-spatial-sampling.html#selecting-a-sample-size">4.1.1</a> we will digitize another sample for La Plata following the same steps as in <a href="spatial-random-sampling-with-qgis.html#digitizing-a-sample-with-qms">4.2.2</a> and <a href="spatial-random-sampling-with-qgis.html#including-the-density-factor">4.2.3</a>, this time with 300 random points.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="what-is-sampling-and-spatial-sampling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-stratified-sampling-with-qgis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Einavg7/Solar_Potential_Technical_Guideindex.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
